#quarkus.package.main-class=org.pipelineframework.search.orchestrator.service.OrchestratorServerApplication

quarkus.hibernate-orm.enabled=false
quarkus.datasource.jdbc=false

# Pipeline Configuration
pipeline.defaults.retry-limit=10
pipeline.defaults.retry-wait-ms=500
pipeline.defaults.recover-on-failure=false
pipeline.defaults.max-backoff=30000
pipeline.defaults.jitter=false
pipeline.defaults.parallel=false

pipeline-cli.generate-cli=true
pipeline-cli.version=0.9.2
pipeline-cli.cli-version=0.9.2
pipeline-cli.cli-description="Search Pipeline CLI"
pipeline-cli.cli-name="Search Pipeline Processing System"

# Pipeline step execution order - defines the sequence of processing steps
# Each step is listed in the order it should execute in the pipeline
pipeline.order=org.pipelineframework.search.crawl_source.service.pipeline.ProcessCrawlSourceGrpcClientStep,\
              org.pipelineframework.search.parse_document.service.pipeline.ProcessParseDocumentGrpcClientStep,\
              org.pipelineframework.search.tokenize_content.service.pipeline.ProcessTokenizeContentGrpcClientStep,\
              org.pipelineframework.search.index_document.service.pipeline.ProcessIndexDocumentGrpcClientStep

# Pipeline step configurations - configure specific step properties (without order)

# Index client-step classifier jars so CDI can discover generated steps
quarkus.index-dependency."crawl-source-client".group-id=org.pipelineframework.search
quarkus.index-dependency."crawl-source-client".artifact-id=crawl-source-svc
quarkus.index-dependency."crawl-source-client".classifier=orchestrator-client
quarkus.index-dependency."parse-document-client".group-id=org.pipelineframework.search
quarkus.index-dependency."parse-document-client".artifact-id=parse-document-svc
quarkus.index-dependency."parse-document-client".classifier=orchestrator-client
quarkus.index-dependency."tokenize-content-client".group-id=org.pipelineframework.search
quarkus.index-dependency."tokenize-content-client".artifact-id=tokenize-content-svc
quarkus.index-dependency."tokenize-content-client".classifier=orchestrator-client
quarkus.index-dependency."index-document-client".group-id=org.pipelineframework.search
quarkus.index-dependency."index-document-client".artifact-id=index-document-svc
quarkus.index-dependency."index-document-client".classifier=orchestrator-client
quarkus.index-dependency."persistence-client".group-id=org.pipelineframework.search
quarkus.index-dependency."persistence-client".artifact-id=persistence-svc
quarkus.index-dependency."persistence-client".classifier=plugin-client
quarkus.index-dependency."cache-invalidation-client".group-id=org.pipelineframework.search
quarkus.index-dependency."cache-invalidation-client".artifact-id=cache-invalidation-svc
quarkus.index-dependency."cache-invalidation-client".classifier=plugin-client

# Talk to crawl-source-svc service
quarkus.grpc.clients.process-crawl-source.host=localhost
quarkus.grpc.clients.process-crawl-source.port=8444
quarkus.grpc.clients.process-crawl-source.plain-text=false
quarkus.grpc.clients.process-crawl-source.use-quarkus-grpc-client=true
quarkus.grpc.clients.process-crawl-source.tls.enabled=true
# Talk to parse-document-svc service
quarkus.grpc.clients.process-parse-document.host=localhost
quarkus.grpc.clients.process-parse-document.port=8445
quarkus.grpc.clients.process-parse-document.plain-text=false
quarkus.grpc.clients.process-parse-document.use-quarkus-grpc-client=true
quarkus.grpc.clients.process-parse-document.tls.enabled=true
# Talk to tokenize-content-svc service
quarkus.grpc.clients.process-tokenize-content.host=localhost
quarkus.grpc.clients.process-tokenize-content.port=8446
quarkus.grpc.clients.process-tokenize-content.plain-text=false
quarkus.grpc.clients.process-tokenize-content.use-quarkus-grpc-client=true
quarkus.grpc.clients.process-tokenize-content.tls.enabled=true
# Talk to index-document-svc service
quarkus.grpc.clients.process-index-document.host=localhost
quarkus.grpc.clients.process-index-document.port=8447
quarkus.grpc.clients.process-index-document.plain-text=false
quarkus.grpc.clients.process-index-document.use-quarkus-grpc-client=true
quarkus.grpc.clients.process-index-document.tls.enabled=true

# Talk to orchestrator-svc (self)
quarkus.grpc.clients.orchestrator-service.host=localhost
quarkus.grpc.clients.orchestrator-service.port=8443
quarkus.grpc.clients.orchestrator-service.plain-text=false
quarkus.grpc.clients.orchestrator-service.use-quarkus-grpc-client=true
quarkus.grpc.clients.orchestrator-service.tls.enabled=true
# Talk to persistence-side-effect services
quarkus.grpc.clients.observe-persistence-raw-document-side-effect.host=localhost
quarkus.grpc.clients.observe-persistence-raw-document-side-effect.port=8448
quarkus.grpc.clients.observe-persistence-raw-document-side-effect.plain-text=false
quarkus.grpc.clients.observe-persistence-raw-document-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-persistence-raw-document-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-persistence-parsed-document-side-effect.host=localhost
quarkus.grpc.clients.observe-persistence-parsed-document-side-effect.port=8448
quarkus.grpc.clients.observe-persistence-parsed-document-side-effect.plain-text=false
quarkus.grpc.clients.observe-persistence-parsed-document-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-persistence-parsed-document-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-persistence-token-batch-side-effect.host=localhost
quarkus.grpc.clients.observe-persistence-token-batch-side-effect.port=8448
quarkus.grpc.clients.observe-persistence-token-batch-side-effect.plain-text=false
quarkus.grpc.clients.observe-persistence-token-batch-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-persistence-token-batch-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-persistence-index-ack-side-effect.host=localhost
quarkus.grpc.clients.observe-persistence-index-ack-side-effect.port=8448
quarkus.grpc.clients.observe-persistence-index-ack-side-effect.plain-text=false
quarkus.grpc.clients.observe-persistence-index-ack-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-persistence-index-ack-side-effect.tls.enabled=true
# Talk to cache-invalidation side-effect services
quarkus.grpc.clients.observe-cache-invalidate-crawl-request-side-effect.host=localhost
quarkus.grpc.clients.observe-cache-invalidate-crawl-request-side-effect.port=8449
quarkus.grpc.clients.observe-cache-invalidate-crawl-request-side-effect.plain-text=false
quarkus.grpc.clients.observe-cache-invalidate-crawl-request-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-cache-invalidate-crawl-request-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-cache-invalidate-raw-document-side-effect.host=localhost
quarkus.grpc.clients.observe-cache-invalidate-raw-document-side-effect.port=8449
quarkus.grpc.clients.observe-cache-invalidate-raw-document-side-effect.plain-text=false
quarkus.grpc.clients.observe-cache-invalidate-raw-document-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-cache-invalidate-raw-document-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-cache-invalidate-parsed-document-side-effect.host=localhost
quarkus.grpc.clients.observe-cache-invalidate-parsed-document-side-effect.port=8449
quarkus.grpc.clients.observe-cache-invalidate-parsed-document-side-effect.plain-text=false
quarkus.grpc.clients.observe-cache-invalidate-parsed-document-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-cache-invalidate-parsed-document-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-cache-invalidate-token-batch-side-effect.host=localhost
quarkus.grpc.clients.observe-cache-invalidate-token-batch-side-effect.port=8449
quarkus.grpc.clients.observe-cache-invalidate-token-batch-side-effect.plain-text=false
quarkus.grpc.clients.observe-cache-invalidate-token-batch-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-cache-invalidate-token-batch-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-cache-invalidate-all-crawl-request-side-effect.host=localhost
quarkus.grpc.clients.observe-cache-invalidate-all-crawl-request-side-effect.port=8449
quarkus.grpc.clients.observe-cache-invalidate-all-crawl-request-side-effect.plain-text=false
quarkus.grpc.clients.observe-cache-invalidate-all-crawl-request-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-cache-invalidate-all-crawl-request-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-cache-invalidate-all-raw-document-side-effect.host=localhost
quarkus.grpc.clients.observe-cache-invalidate-all-raw-document-side-effect.port=8449
quarkus.grpc.clients.observe-cache-invalidate-all-raw-document-side-effect.plain-text=false
quarkus.grpc.clients.observe-cache-invalidate-all-raw-document-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-cache-invalidate-all-raw-document-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-cache-invalidate-all-parsed-document-side-effect.host=localhost
quarkus.grpc.clients.observe-cache-invalidate-all-parsed-document-side-effect.port=8449
quarkus.grpc.clients.observe-cache-invalidate-all-parsed-document-side-effect.plain-text=false
quarkus.grpc.clients.observe-cache-invalidate-all-parsed-document-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-cache-invalidate-all-parsed-document-side-effect.tls.enabled=true
quarkus.grpc.clients.observe-cache-invalidate-all-token-batch-side-effect.host=localhost
quarkus.grpc.clients.observe-cache-invalidate-all-token-batch-side-effect.port=8449
quarkus.grpc.clients.observe-cache-invalidate-all-token-batch-side-effect.plain-text=false
quarkus.grpc.clients.observe-cache-invalidate-all-token-batch-side-effect.use-quarkus-grpc-client=true
quarkus.grpc.clients.observe-cache-invalidate-all-token-batch-side-effect.tls.enabled=true

# Vert.x configuration
# Server endpoints are disabled as the orchestrator is purely a gRPC client
quarkus.http.host-enabled=true

# gRPC server configuration
# Server endpoints are disabled as the orchestrator is purely a gRPC client
quarkus.grpc.server.use-separate-server=false
quarkus.grpc.server.port=8450
# Increase msg size limit for all clients to 32M
quarkus.grpc.clients.default.max-inbound-message-size=33554432

# TLS configuration
quarkus.tls.trust-store.jks.path=client-truststore.jks
quarkus.tls.trust-store.jks.password=secret

# Micrometer configuration
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics
quarkus.micrometer.binder.http-server.enabled=true
quarkus.micrometer.binder.http-client.enabled=true

# OpenTelemetry configuration
quarkus.otel.enabled=true
quarkus.otel.exporter.otlp.endpoint=http://otel-collector:4317
quarkus.otel.exporter.otlp.protocol=grpc
quarkus.otel.traces.enabled=true
quarkus.otel.metrics.enabled=true
quarkus.otel.logs.enabled=true

# Docker image
quarkus.container-image.builder=jib
quarkus.container-image.registry=localhost
quarkus.container-image.group=search-pipeline
quarkus.container-image.name=orchestrator-svc
quarkus.container-image.tag=latest
